<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="api-base-url" content="{{ API_BASE_URL }}" id="api-base-url-meta">
    <title>Avalia√ß√£o de Risco de Diabetes</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Avalia√ß√£o de Risco de Diabetes</h1>
            <p class="subtitle">Sistema de avalia√ß√£o utilizando modelos de Machine Learning</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab('avaliacao')">Avalia√ß√£o de Paciente</button>
            <button class="tab-button" onclick="showTab('treinamento')">Treinamento de Modelos</button>
        </div>

        <!-- Tab: Avalia√ß√£o -->
        <div id="avaliacao-tab" class="tab-content active">
            <div class="card">
                <h2>Dados de Entrada</h2>
                <form id="avaliacao-form">
                    <div class="test-cases">
                        <div class="test-cases-header">
                            <h3>Casos de teste</h3>
                            <p class="muted">Clique para preencher os campos automaticamente (Testes 1‚Äì5).</p>
                        </div>
                        <div class="test-cases-buttons">
                            <button type="button" class="btn btn-secondary" onclick="preencherCasoTeste('t1')">Teste 1 ‚Äî Sem diabetes</button>
                            <button type="button" class="btn btn-secondary" onclick="preencherCasoTeste('t2')">Teste 2 ‚Äî Com diabetes</button>
                            <button type="button" class="btn btn-secondary" onclick="preencherCasoTeste('t3')">Teste 3 ‚Äî Lim√≠trofe</button>
                            <button type="button" class="btn btn-secondary" onclick="preencherCasoTeste('t4')">Teste 4 ‚Äî Idoso sem diabetes</button>
                            <button type="button" class="btn btn-secondary" onclick="preencherCasoTeste('t5')">Teste 5 ‚Äî Jovem com diabetes</button>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="Pregnancies">N√∫mero de gesta√ß√µes</label>
                            <input type="number" id="Pregnancies" name="Pregnancies" min="0" required>
                        </div>

                        <div class="form-group">
                            <label for="Glucose">Glicose (mg/dL)</label>
                            <input type="number" id="Glucose" name="Glucose" min="0" step="0.1" required>
                        </div>

                        <div class="form-group">
                            <label for="BloodPressure">Press√£o arterial (mmHg)</label>
                            <input type="number" id="BloodPressure" name="BloodPressure" min="0" step="0.1" required>
                        </div>

                        <div class="form-group">
                            <label for="SkinThickness">Espessura da pele (mm)</label>
                            <input type="number" id="SkinThickness" name="SkinThickness" min="0" step="0.1" required>
                        </div>

                        <div class="form-group">
                            <label for="Insulin">Insulina (¬µU/mL)</label>
                            <input type="number" id="Insulin" name="Insulin" min="0" step="0.1" required>
                        </div>

                        <div class="form-group">
                            <label for="BMI">IMC (Body Mass Index)</label>
                            <input type="number" id="BMI" name="BMI" min="0" step="0.1" required>
                        </div>

                        <div class="form-group">
                            <label for="DiabetesPedigreeFunction">Fun√ß√£o de pedigree diab√©tico</label>
                            <input type="number" id="DiabetesPedigreeFunction" name="DiabetesPedigreeFunction" min="0" step="0.001" required>
                        </div>

                        <div class="form-group">
                            <label for="Age">Idade</label>
                            <input type="number" id="Age" name="Age" min="0" max="120" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="incluir_explicacao" checked>
                            Incluir explica√ß√£o gerada por IA
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary">Avaliar Paciente</button>
                </form>
            </div>

            <div id="avaliacao-resultado" class="card hidden">
                <h2>Resultados da Avalia√ß√£o</h2>
                
                <div id="dados-paciente" class="result-section">
                    <h3>Dados do Paciente (Processados)</h3>
                    <div id="paciente-info" class="info-box"></div>
                </div>

                <div id="predicoes" class="result-section">
                    <h3>Predi√ß√µes dos Modelos</h3>
                    <div id="modelos-resultado"></div>
                </div>

                <div id="explicacao-ia" class="result-section hidden">
                    <h3>Interpreta√ß√£o da IA</h3>
                    <div id="explicacao-texto" class="info-box"></div>
                </div>
            </div>

            <div id="avaliacao-erro" class="card error hidden">
                <h3>Erro</h3>
                <p id="erro-mensagem"></p>
            </div>
        </div>

        <!-- Tab: Treinamento -->
        <div id="treinamento-tab" class="tab-content">
            <div class="card">
                <h2>Treinamento de Modelos</h2>
                <p>Clique no bot√£o abaixo para iniciar o treinamento dos modelos de Machine Learning.</p>
                <p class="warning">‚ö†Ô∏è Este processo pode levar alguns minutos para completar.</p>
                
                <div class="button-group">
                    <button type="button" class="btn btn-primary" onclick="treinarModelos()">Iniciar Treinamento</button>
                    <button type="button" class="btn btn-secondary" onclick="baixarLog()">
                        <span class="icon">üì•</span> Baixar Log de Execu√ß√£o
                    </button>
                </div>
            </div>

            <div id="treinamento-resultado" class="card hidden">
                <h2>Resultados do Treinamento</h2>
                
                <div class="result-section">
                    <h3>Status</h3>
                    <div id="status-info" class="info-box"></div>
                </div>

                <div id="metricas-base-lr" class="result-section hidden">
                    <h3>M√©tricas - Logistic Regression (Base)</h3>
                    <div id="metricas-lr" class="info-box"></div>
                </div>

                <div id="metricas-base-rf" class="result-section hidden">
                    <h3>M√©tricas - Random Forest (Base)</h3>
                    <div id="metricas-rf" class="info-box"></div>
                </div>

                <div id="metricas-otimizado-rf" class="result-section hidden">
                    <h3>M√©tricas - Random Forest (Otimizado)</h3>
                    <div id="metricas-rf-opt" class="info-box"></div>
                </div>

                <div id="parametros-otimizacao" class="result-section hidden">
                    <h3>Melhores Par√¢metros (Algoritmo Gen√©tico)</h3>
                    <div id="parametros-info" class="info-box"></div>
                </div>

                <div id="tempo-execucao" class="result-section hidden">
                    <h3>Tempo de Execu√ß√£o</h3>
                    <div id="tempo-info" class="info-box"></div>
                </div>
            </div>

            <div id="treinamento-erro" class="card error hidden">
                <h3>Erro</h3>
                <p id="treinamento-erro-mensagem"></p>
            </div>

            <div id="treinamento-loading" class="card loading hidden">
                <h3>Treinando modelos...</h3>
                <p>Aguarde, este processo pode levar alguns minutos.</p>
            </div>

            <div id="log-download-erro" class="card error hidden">
                <h3>Erro ao Baixar Log</h3>
                <p id="log-download-erro-mensagem"></p>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
